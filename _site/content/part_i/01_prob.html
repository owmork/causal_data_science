<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-10-01">

<title>causal_ds_ws22 - Probability Theory and Statistics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">causal_ds_ws22</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../content/part_i/01_prob.html" aria-current="page">Probability</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#probability" id="toc-probability" class="nav-link" data-scroll-target="#probability">Probability</a>
  <ul class="collapse">
  <li><a href="#basic-rules-of-probability" id="toc-basic-rules-of-probability" class="nav-link" data-scroll-target="#basic-rules-of-probability"><strong>Basic rules of probability</strong></a></li>
  <li><a href="#probability-tree" id="toc-probability-tree" class="nav-link" data-scroll-target="#probability-tree"><strong>Probability Tree</strong></a></li>
  <li><a href="#set-theory" id="toc-set-theory" class="nav-link" data-scroll-target="#set-theory"><strong>Set Theory</strong></a></li>
  <li><a href="#bayes-theorem" id="toc-bayes-theorem" class="nav-link" data-scroll-target="#bayes-theorem"><strong>Bayes Theorem</strong></a></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><strong>Application</strong></a></li>
  </ul></li>
  <li><a href="#statistics" id="toc-statistics" class="nav-link" data-scroll-target="#statistics">Statistics</a>
  <ul class="collapse">
  <li><a href="#random-variable" id="toc-random-variable" class="nav-link" data-scroll-target="#random-variable">Random Variable</a></li>
  <li><a href="#expected-value" id="toc-expected-value" class="nav-link" data-scroll-target="#expected-value">Expected value</a></li>
  <li><a href="#variance" id="toc-variance" class="nav-link" data-scroll-target="#variance"><strong>Variance</strong></a></li>
  <li><a href="#covariance" id="toc-covariance" class="nav-link" data-scroll-target="#covariance"><strong>Covariance</strong></a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#assignments" id="toc-assignments" class="nav-link" data-scroll-target="#assignments">Assignments</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Probability Theory and Statistics</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 1, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Before we dive into topics of causal inference, we review some basic concepts of probability and statistics. All methods that we will use later in this course are based on statistical models and these in turn, require probability theory. But we will keep it as short as possible as our focus and learning goal lies more on applications and coding than on the theoretical part.</p>
</section>
<section id="probability" class="level1">
<h1>Probability</h1>
<p>First, we will review some basic concepts of probability theory.</p>
<section id="basic-rules-of-probability" class="level2">
<h2 class="anchored" data-anchor-id="basic-rules-of-probability"><strong>Basic rules of probability</strong></h2>
<p>A probability is always linked to an event typically denoted by a capital letter, e.g.&nbsp;<span class="math inline">\(A\)</span> and expresses how likely this event is to happen. Several events build a set of events <span class="math inline">\(A,B \subseteq \Omega\)</span>. Probabilities to describe the chance of occurrence of event <span class="math inline">\(A\)</span> are always between <span class="math inline">\(0\)</span> and <span class="math inline">\(1\)</span>. The occurrence of an event <span class="math inline">\(A\)</span> implies <span class="math inline">\(P(A) = 1\)</span>, while the impossibility of event <span class="math inline">\(A\)</span> occurring implies <span class="math inline">\(P(A) = 0\)</span>.</p>
<p><span class="math inline">\(P(\overline{A})\)</span> is the compliment of <span class="math inline">\(P(A)\)</span>, so <span class="math inline">\(\overline{A}\)</span> is what happens, when <span class="math inline">\(A\)</span> does not happen. Consequently as either <span class="math inline">\(A\)</span> or <span class="math inline">\(\overline{A}\)</span> occurs, the probability of either event occurring is <span class="math inline">\(P(A) + P(\overline{A}) = 1\)</span>. Generally, if two events <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> are mutually exclusive, i.e.&nbsp;only one of those events can happen, then <span class="math inline">\(P(A \cup B) = P(A) + P(B)\)</span>, where <span class="math inline">\(\cup\)</span> represents the union of both events. The probability of either event happening is equal to the sum of the individual probabilities.</p>
<p>In contrast, if the two events are not mutually exclusive, the probability of both events happening is calculated by <span class="math inline">\(P(A \cup B) = P(A) + P(B) + P(A \cap B)\)</span> with <span class="math inline">\(P(A \cap B)\)</span> being the intersection of both events, i.e.&nbsp;the probability of both events happening. This formula is based on the <strong>addition rule</strong>.</p>
<p>The aforementioned intersection <span class="math inline">\(P(A \cap B)\)</span> can be calculated by the <strong>multiplication rule</strong>: <span class="math inline">\(P(A \cap B) = P(A|B) * P(B) = P(B|A) * P(A)\)</span>, where <span class="math inline">\(P(A|B)\)</span> denotes the probability of <span class="math inline">\(A\)</span> happening given that <span class="math inline">\(B\)</span> has happened.</p>
<p>The <strong>total probability rule</strong> states that <span class="math inline">\(P(A) = P(A \cap B) + P(A \cap \overline{B})\)</span>.</p>
<p>Already used above, <span class="math inline">\(P(A|B)\)</span> is called a <strong>conditional probability</strong> and is defined by:</p>
<p><span class="math display">\[
P(A \mid B) = \frac{P(A \cap B)}{P(B)}
\]</span></p>
<p>It can be thought of as the probability of an event <span class="math inline">\(A\)</span> after you know that <span class="math inline">\(B\)</span> is true. Essentially, it computes the possibility of event <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>, normalized by the probability of <span class="math inline">\(B\)</span> occurring.</p>
<p>Another important concept when dealing with probabilities of events is <strong>stochastic independence</strong>. In case of two events being independent, the conditional probability is equal to the probability of the event happening anyways:</p>
<p><span class="math display">\[
P(A \mid B) = P(A)
\]</span></p>
<p>A typical example of independence is to roll a die twice. The second roll does not depend on the first one and each outcome is as likely independent of the first roll. This also means that</p>
<p><span class="math display">\[
P(A \cap B) = P(A) \ P(B)
\]</span></p>
</section>
<section id="probability-tree" class="level2">
<h2 class="anchored" data-anchor-id="probability-tree"><strong>Probability Tree</strong></h2>
<p>An intuitive way to think about probabilities are probability tree. Branches from one node always sum to <span class="math inline">\(1\)</span> in probability as one (and only one) of the events has to happen. The probability of two consecutive events is obtained by multiplying the probabilities. Here, all events are independent and therefore all probabilities are <span class="math inline">\(0.5\)</span> and therefore: <span class="math inline">\(P(A \mid B) = P(A)\)</span>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../img/prob_tree.jpeg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption"><a href="https://www.mashupmath.com/blog/probability-tree-diagrams" class="uri">https://www.mashupmath.com/blog/probability-tree-diagrams</a></figcaption><p></p>
</figure>
</div>
<p>!!! Explanation conditional probability (dependent example)</p>
<p>!!! Assignment: some empty gaps</p>
</section>
<section id="set-theory" class="level2">
<h2 class="anchored" data-anchor-id="set-theory"><strong>Set Theory</strong></h2>
<p>An extremely useful tool to visualize the occurrence and relationship between events are Venn diagrams from set theory.</p>
<p>Let’s use an example to understand the rules mentioned above using a Venn diagram: suppose you are working in a company that has developed an application available on three different kind of devices, smartphones, tables and computers. So far your pricing plan is very simple and you have just charged the same amount from all customers, regardless of what and how many devices they use.</p>
<p>But now you want to review your pricing plan and evaluate whether it could make sense to offer pricing plans that differ in the device and number of maximum devices that can be used per account. So first of all you collect usage data of a random sample of 1000 customers from the last month to get an idea of the current distribution.</p>
<p><code>library()</code> loads external packages/libraries containing functions that are not built in base <code>R</code>.</p>
<p><code>tibble()</code> is the most convenient way to create tables. You specify column name and content and assign your <code>tibble</code> to an object to store it.</p>
<p><code>ifelse(test, yes, no)</code> is a short function for if…else statements. The first argument is a condition that is either <code>TRUE</code> or <code>FALSE</code> and determines whether the second or third argument is returned.</p>
<p><code>rbinom(n, size, prob)</code> samples <code>n</code> values from a binomial distribution of a given <code>size</code> and with given probabilities <code>prob</code>.</p>
<p><code>mutate()</code> is one of the most important functions for data manipulation in tables. It is used to either create or change variables/columns. You provide the column name (new or existing) and then specify how to create or change the values in that specific column. For example, <code>mutate(table, new_variable = existing_var / 100)</code>, which is equivalent to <code>table %&gt;% mutate(new_variable = existing_var / 100)</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load tidyverse package</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✓ ggplot2 3.3.5     ✓ purrr   0.3.4
✓ tibble  3.1.6     ✓ dplyr   1.0.8
✓ tidyr   1.2.0     ✓ stringr 1.4.0
✓ readr   2.1.2     ✓ forcats 0.5.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ──────────────────────────────────────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nmber of obervations</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create tibble</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>app_usage <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create user_id in increasing order</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">user_id =</span> <span class="dv">1</span><span class="sc">:</span>n,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Randomly sample if smartphone was used</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">smartphone =</span> <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.6</span>),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sample if tablet was used. More likely if smartphone was not used.</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">tablet =</span> <span class="fu">ifelse</span>(smartphone <span class="sc">==</span> <span class="dv">1</span>, <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.2</span>), <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.7</span>)),</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sample if computer was used. More likely if tablet was not used.</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">computer =</span> <span class="fu">ifelse</span>(tablet <span class="sc">==</span> <span class="dv">1</span>, <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.1</span>), <span class="fu">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.5</span>))</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># If no device has value of 1, we set smartphone to 1</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>app_usage <span class="ot">&lt;-</span> app_usage <span class="sc">%&gt;%</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">smartphone =</span> <span class="fu">ifelse</span>(<span class="fu">sum</span>(smartphone, tablet, computer) <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">1</span>, smartphone))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, we simulated some artificial data. Seeing the formulas used for constructing the data, we already know that e.g.&nbsp;customers tend not to use the app on both tablet and computer.</p>
<p>To see the first lines of a table (for example a <code>tibble()</code> or a <code>data.frame()</code>, you can use the <code>head(table, n)</code> function, where <code>n</code> specifies how many rows you want to see.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(app_usage, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   user_id smartphone tablet computer
     &lt;int&gt;      &lt;int&gt;  &lt;int&gt;    &lt;int&gt;
 1       1          1      1        0
 2       2          1      0        1
 3       3          1      0        1
 4       4          1      0        0
 5       5          1      0        1
 6       6          1      0        0
 7       7          1      1        0
 8       8          1      1        0
 9       9          1      1        0
10      10          1      1        0</code></pre>
</div>
</div>
<p>A general overview of total customers per device category shows that in the smartphone category there are the most users and in the computer category there are the least.</p>
<p>Summing all values by column is done by <code>colSums(table)</code>. For rows, you would use <code>rowSums(table)</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(app_usage)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   user_id smartphone     tablet   computer 
    500500       1000        399        334 </code></pre>
</div>
</div>
<p>Summing the <span class="math inline">\(user\_id\)</span> does not make any sense. We could ignore it, but we can also just access the columns we want to sum. There are several ways.</p>
<p>To access only specified columns, you can provide the location or names in square brackets or you can use the <code>select()</code> function.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(app_usage[, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>smartphone     tablet   computer 
      1000        399        334 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(app_usage[, <span class="fu">c</span>(<span class="st">"smartphone"</span>, <span class="st">"tablet"</span>, <span class="st">"computer"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>smartphone     tablet   computer 
      1000        399        334 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>app_usage <span class="sc">%&gt;%</span> <span class="fu">select</span>(smartphone, tablet, computer) <span class="sc">%&gt;%</span> <span class="fu">colSums</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>smartphone     tablet   computer 
      1000        399        334 </code></pre>
</div>
</div>
<p>Now let’s see what the Venn diagram says, which is a diagram showing the relation between sets. We can see the union, intersection differences and complements in the diagram.</p>
<p><code>which()</code> checks a condition and returns the indices.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>set_phon <span class="ot">&lt;-</span> <span class="fu">which</span>(app_usage<span class="sc">$</span>smartphone <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>set_tabl <span class="ot">&lt;-</span> <span class="fu">which</span>(app_usage<span class="sc">$</span>tablet <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>set_comp <span class="ot">&lt;-</span> <span class="fu">which</span>(app_usage<span class="sc">$</span>computer <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>sets_all <span class="ot">&lt;-</span> <span class="fu">list</span>(set_phon, set_tabl, set_comp)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggVennDiagram)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggVennDiagram</span>(sets_all, <span class="at">category.names =</span> <span class="fu">c</span>(<span class="st">"Smartphone"</span>, <span class="st">"Tablet"</span>, <span class="st">"Computer"</span>)) <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>, <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="st">"#1C1C1C"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_prob_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/venn_diag.png" class="img-fluid" width="400"></p>
<p>Using the Venn diagram, we are able to answer questions like the following:</p>
<ul>
<li><p>What is the percentage of customers using all three devices?</p></li>
<li><p>What is the percentage of customers using at least two devices?</p></li>
<li><p>What is the percentage of customers using only one device?</p></li>
</ul>
<p>We can also use the example to go through the basic probability rules defined above.</p>
<p><strong>Addition rule</strong>:</p>
<p>What is the percentage of customers using a smartphone, a tablet or both devices?</p>
<p><span class="math inline">\(P(T \cup S) = P(T) + P(S) - T \cap S)\)</span></p>
<p><strong>Multiplication rule</strong>:</p>
<p>Given that a customer uses a computer, how likely is he/she to use a tablet as well?</p>
<p><span class="math inline">\(P(T|C) = \frac{P(T \cap C)}{P(C)}\)</span></p>
<p><strong>Total probability rule</strong>:</p>
<p>What is the fraction of customers using a computer?</p>
<p><span class="math inline">\(P(C) = P(C \cap T) + P(C \cap \overline{T})\)</span></p>
</section>
<section id="bayes-theorem" class="level2">
<h2 class="anchored" data-anchor-id="bayes-theorem"><strong>Bayes Theorem</strong></h2>
<p>A very important theorem in probability theory is Bayes theorem that we get by reformulating the multiplication rule</p>
<p><span class="math display">\[
P(A ∩ B) = P(A|B)*P(B)&nbsp;\\
P(B ∩ A) = P(B|A)*P(A)
\]</span></p>
<p>Using the equality of <span class="math inline">\(P(A ∩ B)\)</span> and <span class="math inline">\(P(B ∩ A)\)</span> we arrive at</p>
<p><span class="math display">\[
P(B|A)*P(A) = P(A|B)*P(B)
\]</span></p>
<p>and finally at the Bayes theorem:</p>
<p><span class="math display">\[
P(A|B) = \frac{P(B|A)*P(A)}{P(B)} = \frac{P(B|A)*P(A)}{P(B|A)*P(A)+P(B|\overline{A})*P(\overline{A})}
\]</span></p>
<p>Bayes theorem states the mathematical formulation for determining a conditional probability, exemplary the likelihood of <span class="math inline">\(A\)</span> occurring conditioned on <span class="math inline">\(B\)</span> having happened before.</p>
<p>You will often hear Bayes theorem in connection with the terms <em>updating beliefs</em>. You start with a prior probability <span class="math inline">\(P(A)\)</span> and collecting evidence <span class="math inline">\(P(B)\)</span> and the likelihood <span class="math inline">\(P(B|A)\)</span>, you update your prior probability to get a posterior probability <span class="math inline">\(P(A|B)\)</span>. That is in fact the foundation of Bayesian inference. Look it up if you want, but you won’t need Bayesian inference for this course.</p>
<p><span class="math display">\[
Posterior = \frac{Likelihood * Prior}{Evidence}
\]</span></p>
</section>
<section id="application" class="level2">
<h2 class="anchored" data-anchor-id="application"><strong>Application</strong></h2>
<p>To understand how useful Bayes theorem is, let’s use an example: Imagine, you are quality assurance manager and you want to buy a new tool that automates part of the quality assurance. If the tool finds a product it considers faulty, an alarm is triggered. The seller of the tool states that if a product is faulty, the tool is 97% reliable and if the product is flawless, the test is 99% reliable. Also, from your past experience you know that 4% of your products come out with flaws.</p>
<p>To assess the usefulness of the tool in practice you want to know the following probabilities:</p>
<ol type="1">
<li><p>What is the probability that when the alarm is triggered the product is found to be flawless?</p></li>
<li><p>What is the probability that when the alarm is triggered the product is found to have flaws?</p></li>
</ol>
<p>Using Bayes theorem and the formulas will help you to arrive at the correct answers and guide your decision whether to buy the tool.</p>
<p>We should start by defining the events and event sets:</p>
<p><span class="math inline">\(A\)</span>: product is faulty vs.&nbsp;<span class="math inline">\(\overline{A}\)</span>: product is flawless</p>
<p><span class="math inline">\(B\)</span>: alarm is triggered vs.&nbsp;<span class="math inline">\(\overline{B}\)</span>: no alarm</p>
<p>Also, from our past experience and the producers specifications we already know some probabilities:</p>
<p><span class="math inline">\(P(B|A) = 0.97\)</span> and consequently <span class="math inline">\(P(\overline{B}|A) = 0.03\)</span></p>
<p><span class="math inline">\(P(B|\overline{A}) = 0.01\)</span> and consequently <span class="math inline">\(P(\overline{B}|\overline{A}) = 0.99\)</span></p>
<p><span class="math inline">\(P(A) = 0.04\)</span> and consequently <span class="math inline">\(P(\overline{A}) = 0.96\)</span></p>
<p>Note, that what we are looking for is not the same as what the manufacturer states in his/her specifications. What we are looking for is <span class="math inline">\(P(\overline{A}|B\)</span> (1) and <span class="math inline">\(P(A|B)\)</span> (2) and we will need Bayes theorem to obtain those probabilities.</p>
<p>Let’s recall Bayes theorem:</p>
<p><span class="math display">\[
P(A|B) = \frac{P(B|A)*P(A)}{P(B)} = \frac{P(B|A)*P(A)}{P(B|A)*P(A)+P(B|\overline{A})*P(\overline{A})}
\]</span></p>
<p>Now we can see, that we have all the information we need to compute the desired probabilities. <span class="math inline">\(P(A|B)\)</span> (2) is calculated by</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">0.97</span> <span class="sc">*</span> <span class="fl">0.04</span>) <span class="sc">/</span> ((<span class="fl">0.97</span> <span class="sc">*</span> <span class="fl">0.04</span>) <span class="sc">+</span> (<span class="fl">0.01</span> <span class="sc">*</span> <span class="fl">0.96</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8</code></pre>
</div>
</div>
<p>and <span class="math inline">\(P(\overline{A}|B)\)</span> (1) by</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="fl">0.01</span> <span class="sc">*</span> <span class="fl">0.96</span>) <span class="sc">/</span> ((<span class="fl">0.01</span> <span class="sc">*</span> <span class="fl">0.96</span>) <span class="sc">+</span> (<span class="fl">0.97</span> <span class="sc">*</span> <span class="fl">0.04</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2</code></pre>
</div>
</div>
<p>These results show that in case the alarm is triggered, there is still a possibility of about 20% that the product is flawless and in only 80% of cases the product is faulty. Depending on your current method of quality assurance, these numbers might make you think more about buying the tool. And also note, how these numbers give a different perspective compared to what the manufacturer said.</p>
</section>
</section>
<section id="statistics" class="level1">
<h1>Statistics</h1>
<p>Now we will talk about some statistical concepts, that are the foundation for modeling processes in both statistical and causal inference.</p>
<section id="random-variable" class="level2">
<h2 class="anchored" data-anchor-id="random-variable">Random Variable</h2>
<p>For starters, let’s define what a random variable is. Often represented by letters such as <span class="math inline">\(X\)</span>, a random variable has a set of values, also called sample space, of which any could be the outcome if we draw from this random variable. Think for example about a die (six possible outcomes). The likelihood of outcomes are defined by a probability distribution that assigns each outcome a probability (for a die, 1/6 for each outcome). A random variable can either take on discrete (e.g.&nbsp;die( or continuous values (e.g.&nbsp;average height of random people).</p>
</section>
<section id="expected-value" class="level2">
<h2 class="anchored" data-anchor-id="expected-value">Expected value</h2>
<p>Because a random variable can take on different values, we cannot represent it as a scalar. However, the expected value of random variable is a scalar and represents something like a “summary” of the random variable with its values and its probability distribution.</p>
<p>Before we define the expected value, we need to introduce the summation operator <span class="math inline">\(\sum\)</span>, denoted by the Greek capital Sigma.</p>
<p>In general, it is used to reduce the sum of a sequence of numbers, like sampled values from a random variable, <span class="math inline">\(x_1, x_2, …, x_n\)</span> to a shorter and more readable form</p>
<p><span class="math display">\[
\sum_{i=1}^nx_i \equiv x_1+x_2+\ldots+x_n
\]</span></p>
<p>with the arbitrary index of summation <span class="math inline">\(i\)</span> being the lower limit and <span class="math inline">\(n\)</span> the upper limit.</p>
<p>By basic math rules, the following simplifications are possible, where <span class="math inline">\(c\)</span> is a constant:</p>
<p><span class="math display">\[
\sum_{i=1}^nc=nc
\]</span></p>
<p>and</p>
<p><span class="math display">\[
\sum_{i=1}^ncx_i=c\sum_{i=1}^nx_i  
\]</span></p>
<p>A statement, that you will see a lot in many applications and formulas is the average of a sequence of numbers, typically denoted by a line over a variable. Some equivalent forms of writing down the calculation for the average are shown here:</p>
<p><span class="math display">\[
\overline{x} = \dfrac{1}{n} \sum_{i=1}^n x_i \\ = \sum_{i=1}^n \dfrac{1}{n} x_i \\ = \sum_{i=1}^n \dfrac{x_i}{n} \\ =\dfrac{x_1+x_2+\dots+x_n}{n} \\ = n^{-1} \sum_{i=1}^{n} x_i
\]</span></p>
<p>This brings us to the first important basic concept we will need throughout the course, the <em>expected value</em>, also called <em>population mean</em>. The expected value of a random variable <span class="math inline">\(X\)</span> is defined as the weighted average of possible values the random variable can take. The weight is equal to the probability of the random variable taking a specific value.</p>
<p>Considering a finite list of potential values <span class="math inline">\(x_1, x_2, …, x_k\)</span> with probabilities <span class="math inline">\(p_1, p_2, …, p_k\)</span>, the expectation of <span class="math inline">\(X\)</span> can be computed by</p>
<p><span class="math display">\[
E(X) = x_1*p_1 + x_2*p_2 + ... + x_k*p_k = \sum_{j}^{k} x_i*p_i
\]</span></p>
<p>As an example, the expected value of a roll of a fair six-sided die, i.e.&nbsp;all outcomes are equally probable with probability of 1/6, is:</p>
<p><span class="math display">\[
E(X) = \frac{1}{6}*1 + \frac{1}{6}*2 + ... + \frac{1}{6}*6 = \frac{1}{6} \sum (1 + 2 + ... + 6)
\]</span></p>
<p>To replicate values and create a vector <code>rep()</code> can be used. It takes the value and number of times it should be replicated.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vector of probabilities (all equal)</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">6</span>, <span class="dv">6</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Vector of possible outcomes</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected value</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(p<span class="sc">*</span>x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.5</code></pre>
</div>
</div>
<p>Additional rules regarding the calculation of expected values that can be useful are:</p>
<p><span class="math display">\[
E(aW+b) = aE(W)+b\ \text{for any constants $a$, $b$} \\
E(W+H) = E(W)+E(H) \\E\Big(W - E(W)\Big) = 0
\]</span></p>
<p>Knowing how to compute the expected value of a random variable is essential for computing other statistics such as variance, standard deviation, covariance, correlation etc.</p>
</section>
<section id="variance" class="level2">
<h2 class="anchored" data-anchor-id="variance"><strong>Variance</strong></h2>
<p>Before we define variance, let’s see why it is important to know it. On both graphs we see almost the same line (small difference because of sampling) going through the data points. It is the line that fits the data best. However, there is a difference in how the data points are distributed. On the left graph, there is high variance compared to the right graph. That means, the data is more dispersed.</p>
<p>!!! conditional expectation</p>
<p><code>seq(from, to, by)</code> or <code>seq(from, to, length.out)</code> returns a vectors with a sequence as specified by the arguments.</p>
<p><code>rnorm(n, mean, sd)</code> samples values from the normal distribution. <code>n</code> specifies the number of values, <code>mean</code> and <code>sd</code> define the parameters of the normal distribution.</p>
<p><code>map()</code> is a very useful function when you want to apply a function to each element of a list or a vector.</p>
<p><code>pivot_longer()</code> changes the format of a table by pivoting columns into rows. To pivot rows into columns, you need <code>pivot_wider()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_prob_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p>Mathematically, the <em>variance</em> is defined as the expectation of the squared deviation of a random variable from its population or sample mean. The <em>sample variance</em> indicates how far a set of observed values spread out from their average value and is an estimate of the full <em>population variance</em>, that in most cases cannot be directly observed due to lack of data of the whole population.</p>
<p>Mathematically, the <em>population variance</em> is defined as</p>
<p><span class="math display">\[
Var(W)=\sigma^2=E\Big[\big(W-E(W)\big)^2\Big]\
\]</span></p>
<p>and the <em>sample variance</em> results as</p>
<p><span class="math display">\[
\widehat{\sigma}^2=(n-1)^{-1}\sum_{i=1}^n(x_i - \overline{x})^2
\]</span></p>
<p>You might have noticed the term <span class="math inline">\((n-1)^{-1}\)</span> is different from what you probably expected (<span class="math inline">\(n^{-1}\)</span>). This is due to a correction, which at this point you should not have to worry about. However, the larger the sample is, the less important this correction is.</p>
<p>A related measure is the standard deviation, which does not have as many desirable properties for computational purposes but is often reported after all calculations to show the spread of distribution.</p>
<p>The standard deviation obtains as the square root of the variance:</p>
<p><span class="math display">\[
\sigma = \sqrt{\sigma^2}
\]</span></p>
<p>A useful and convenient properties of the variance is that constants have a variance of 0. But if you want to scale a random variable by a constant factor of <span class="math inline">\(a\)</span>, then the variance will increase by <span class="math inline">\(a^2\)</span>.</p>
<p><span class="math display">\[
Var(aX+b)=a^2V(X)
\]</span></p>
<p>You can also conveniently compute a variance for the sum of two random variables</p>
<p><span class="math display">\[
Var(X+Y)=Var(X)+Var(Y)+2\Big(E(XY) - E(X)E(Y)\Big)
\]</span></p>
<p>which in case of independence reduces to the sum of the individual variances due to the fact that <span class="math inline">\(E(XY) = E(X)E(Y)\)</span>.</p>
</section>
<section id="covariance" class="level2">
<h2 class="anchored" data-anchor-id="covariance"><strong>Covariance</strong></h2>
<p>Covariance determines the relationship between two or more random variables, i.e.&nbsp;how they behave to each other. For example, when the weather is hot, there are more ice cream sales, so these two random variables move in the same direction. Others do not have any statistical association or move into opposite direction.</p>
<p><code>as_tibble()</code> or <code>as.data.frame()</code> can be used to change e.g.&nbsp;matrices or lists into tables.</p>
<p><code>rbind()</code> or <code>bind_rows()</code> are used to bind rows, vectors or tables to one table. They behave slightly different, so you should know both functions. The counterparts for columns are <code>cbind()</code> and <code>bind_cols()</code>.</p>
<p>To rename columns, you can use <code>rename(new_name = old_name)</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `x` argument of `as_tibble.matrix()` must have unique column names if `.name_repair` is omitted as of tibble 2.0.0.
Using compatibility `.name_repair`.
This warning is displayed once every 8 hours.
Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]  1.0  0.8  0.0
[2,]  0.8  1.0 -0.5
[3,]  0.0 -0.5  1.0</code></pre>
</div>
</div>
<p>From left to right, the graph shows a positive covariance, a negative covariance and no covariance at all.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01_prob_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
<p>If the equality <span class="math inline">\(E(XY) = E(X)E(Y)\)</span> holds, then it implies a <em>covariance</em> of 0 between the variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>. <em>Covariance</em> is a measure of linear dependency and hence, independence implies a covariance of 0. Looking back at the formula of the variance of the sum of two random variables, it thus can be said that it is the sum of variances of both random variables plus two times their covariance.</p>
<p>As a matter of form, the formula for the covariance of the random variables <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> is</p>
<p><span class="math display">\[
Cov(X,Y) = E(XY) - E(X)E(Y)
\]</span></p>
<p>But, similar to variance, the interpretation of a covariance is not very easy and in most cases, for the purpose of interpretation, it is preferred to look at the <em>correlation</em> which can be derived from the covariance if the individual variances are known.</p>
<p><span class="math display">\[
\text{Corr}(X,Y) = \dfrac{C(X,Y)}{\sqrt{V(X)V(Y)}}
\]</span></p>
<p>The <em>correlation</em> is a standardized measure and is by construction bound between -1 and 1. High values in magnitude (close to 1 or -1) indicate a very strong linear relationship, while the direction of this relationship is represented by the algebraic sign.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Many of the rules and concepts that you have just learned will play a crucial in the upcoming chapters. Their understanding will guide you through and let you understand why we need to put a particular emphasis on causality, how we can isolate causal effects and build the foundation for many methods from our toolbox.</p>
</section>
<section id="assignments" class="level1">
<h1>Assignments</h1>
<ol type="1">
<li>Load data with the two variables <span class="math inline">\(age\)</span> and <span class="math inline">\(income\)</span>.</li>
</ol>
<!-- -->
<ol type="a">
<li>Compute</li>
</ol>
<ul>
<li><p>expected value</p></li>
<li><p>variance</p></li>
<li><p>standard deviation</p></li>
</ul>
<p>for both variables.</p>
<ol start="2" type="a">
<li><p>Then, examine the relationship between the two variables and compute covariance and correlation.</p></li>
<li><p>Also, compute the following expected means:</p></li>
</ol>
<ul>
<li><p><span class="math inline">\(E[income|age &lt;= 18]\)</span></p></li>
<li><p><span class="math inline">\(E[income|age \in [18, 65)]\)</span></p></li>
<li><p><span class="math inline">\(E[income|age &gt;= 65]\)</span></p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>